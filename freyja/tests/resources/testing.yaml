---
# THIS FILE SHOULD ONLY BE USED FOR TESTING SCRIPTS
# USE test.sh !!!
version: "v0.1.0-beta"

hosts:
  - hostname: "freyja-testing"
    image: "$HOME/Images/debian11"
    os: "debian11"

    memory: 2048
    vcpus: 1
    disks:
      sysroot:
        size: 20
      additional:
        - size: 5
          mount: "/media/disk1"
          read-only: true

    users:
      - username: "alice"
        # 'changeit'
        password: "$5$Z9hvWBu2Iofxe4UA$P8aqonOif2.V0OhE/6fu83trONYqHd.8JiO1d3gTKe3"
        keys: [ "$HOME/.ssh/id_ed25519.pub" ]
        groups: [ "sudo" ]

    networks:
      - name: "ctrl-plane-test"
        address: "52:54:02:ff:ff:ff"

    write-files:
      - source: "tests/resources/write-file.txt"
        destination: "/home/alice/write-file.txt"
        permissions: "0666"
        owner: "alice:alice"

    packages: ["vim", "git"]
    runcmd:
      - echo "hello world !" > /home/alice/file2.txt

    update: true
    reboot: true